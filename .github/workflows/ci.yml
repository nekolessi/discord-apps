name: CI
on:
push:
branches: [ main ]
pull_request:
branches: [ main ]


jobs:
build:
name: Build & Lint (Node ${{ matrix.node }})
runs-on: ubuntu-latest
strategy:
matrix:
node: [20.x]
steps:
- uses: actions/checkout@v4


- name: Use Node.js ${{ matrix.node }}
uses: actions/setup-node@v4
with:
node-version: ${{ matrix.node }}
cache: 'pnpm'


- name: Setup pnpm
uses: pnpm/action-setup@v4
with:
version: 9


- name: Install deps
run: pnpm install --frozen-lockfile || pnpm install


- name: Type check & build
run: pnpm build


- name: Lint
run: pnpm lint